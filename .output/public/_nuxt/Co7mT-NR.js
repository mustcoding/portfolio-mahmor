import{d as u,X as v,K as y,r as h,O as d,v as c,A as p,R as m,P as r,Q as g,F as _,a0 as S,o as w,S as $,L as A,aa as x,ab as R,a9 as b,a7 as B,V as L,W as k,U as z,ac as M}from"./CdwcfL1k.js";const[C,P]=y("AvatarRoot"),F=u({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(o){return v(),P({imageLoadingStatus:h("loading")}),(a,e)=>(c(),d(r(g),{"as-child":a.asChild,as:a.as},{default:p(()=>[m(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),I=u({__name:"AvatarFallback",props:{delayMs:{default:0},asChild:{type:Boolean},as:{default:"span"}},setup(o){const a=o,e=C();v();const s=h(!1);let l;return _(e.imageLoadingStatus,t=>{t==="loading"&&(s.value=!1,a.delayMs?l=setTimeout(()=>{s.value=!0,clearTimeout(l)},a.delayMs):s.value=!0)},{immediate:!0}),(t,f)=>s.value&&r(e).imageLoadingStatus.value!=="loaded"?(c(),d(r(g),{key:0,"as-child":t.asChild,as:t.as},{default:p(()=>[m(t.$slots,"default")]),_:3},8,["as-child","as"])):S("",!0)}});function j(o,a){const e=h("idle"),s=h(!1),l=t=>()=>{s.value&&(e.value=t)};return w(()=>{s.value=!0,_([()=>o.value,()=>a==null?void 0:a.value],([t,f])=>{if(!t)e.value="error";else{const n=new window.Image;e.value="loading",n.onload=l("loaded"),n.onerror=l("error"),n.src=t,f&&(n.referrerPolicy=f)}},{immediate:!0})}),$(()=>{s.value=!1}),e}const T=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(o,{emit:a}){const e=o,s=a,{src:l,referrerPolicy:t}=A(e);v();const f=C(),n=j(l,t);return _(n,i=>{s("loadingStatusChange",i),i!=="idle"&&(f.imageLoadingStatus.value=i)},{immediate:!0}),(i,q)=>x((c(),d(r(g),{role:"img","as-child":i.asChild,as:i.as,src:r(l),"referrer-policy":r(t)},{default:p(()=>[m(i.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[R,r(n)==="loaded"]])}}),E=u({__name:"Avatar",props:{class:{},size:{default:"sm"},shape:{default:"circle"}},setup(o){const a=o;return(e,s)=>(c(),d(r(F),{class:b(r(B)(r(U)({size:e.size,shape:e.shape}),a.class))},{default:p(()=>[m(e.$slots,"default")]),_:3},8,["class"]))}}),K=u({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{}},setup(o){const a=o;return(e,s)=>(c(),d(r(I),L(k(a)),{default:p(()=>[m(e.$slots,"default")]),_:3},16))}}),N=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},asChild:{type:Boolean},as:{}},setup(o){const a=o;return(e,s)=>(c(),d(r(T),z(a,{class:"h-full w-full object-cover"}),{default:p(()=>[m(e.$slots,"default")]),_:3},16))}}),U=M("inline-flex items-center justify-center font-normal text-foreground select-none shrink-0 bg-secondary overflow-hidden",{variants:{size:{sm:"h-10 w-10 text-xs",base:"h-16 w-16 text-2xl",lg:"h-32 w-32 text-5xl"},shape:{circle:"rounded-full",square:"rounded-md"}}});export{E as _,N as a,K as b};
